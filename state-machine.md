
#### 状态机复制

在介绍技术原理前，这里先介绍比特币，或者说绝大多数区块链都在应用的一个范式：通过状态机复制实现容错服务。这个范式的目标是解决多个副本的一致性问题，到实际的应用场景中则例如分布式数据库，再如这里讨论的区块链。而它的实现方式也非常简明：

1. 所有副本以某一状态作为初始态。
2. 在接收新的输入前，副本状态保持不变。接收到输入i后，副本会转换为新状态。且状态转换函数是确定性的，给定相同的副本状态与输入，副本的新状态是一致的。
3. 通过这样的方法，只要副本具有相同的初始状态s0，并保证每个副本的输入i0，i1，i2...in相同且顺序一致，那么所有副本的状态都能保持一致。

我们借用比特币的语境，重新阐释一下上面的解释：

> 这里我们使用“状态”代指比特币中的所有UTXO

1. 所有比特币客户端以创世区块作为初始状态。
2. 在接收到新的区块前，比特币账本的状态保持不变。接收到新交易后，账本会转换为新状态。且这一转换过程是确定性的，给定相同的账本状态与相同的交易，新的账本状态是一致的。
3. 通过这样的方法，只要所有比特币客户端都能以创世区块作为初始态，并以相同的顺序处理相同的交易i0，i1，i2...in，那么最终所有客户端所持有的账本状态是一致的。

而我们其实知道，这里最核心的问题在于如何保证所有节点都能决定一批相同顺序的交易，换言之，即共识。而RGB所做的，则是借助比特币的共识，将比特币用作“电子公告板”，从而允许其他客户端验证智能合约的状态是否正确。